<import src="/templates/createMusicList/index.wxml"/>
<import src="/templates/beatList/index.wxml"/>

<view class="collection-container">
  <view class="toggle-btn-container clearfix">
    <button data-value="music" class="music-btn {{type == 'music' ? 'active' : ''}}" catchtap="togglePage">创作</button>
    <button data-value="beat" class="music-btn {{type == 'beat' ? 'active' : ''}}" catchtap="togglePage">伴奏</button>
  </view>
  <view hidden="{{type == 'beat'}}">
    <!-- <template is="createMusicList" data="{{createMusicPage}}"></template> -->
    <audio class="hide" 
      src="{{createMusicPage.list[createMusicPage.playingIndex].mixture_url}}" 
      id="musicAudio" 
      bindended="musicPlayEnd" 
      binderror="musicLoadError" 
      bindtimeupdate="musicAudioTimeUpdate"></audio>
    <createMusicList
      bind:toggleMusicItemStatus="toggleMusicItemStatus"
      bind:toggleMusicCollectItem="toggleMusicCollectItem"
      createMusicPage="{{createMusicPage}}"/>
  </view>
  <view hidden="{{type == 'music'}}">
    <template is="beatList" data="{{beatPage}}"></template>
  </view>
</view>