<view hidden="{{!showCategory}}" class="tab-container">
  <view class="clearfix" style="width: {{tabWidth}}px">
    <view wx:for="{{tabs}}" wx:for-item="item" wx:for-index="index" wx:key="{{item.id}}"
    class="tab-item {{activeId == item.id ? 'active' : ''}} item-{{index}}" data-index="{{index}}" catchtap="toggleTab">
      {{item.name}}
    </view>
  </view>
</view>
<view class="list-container">
  <view class="item" wx:for="{{page.list}}" wx:for-index="index" wx:for-item="item" wx:key="{{item.id}}"
    data-index="{{index}}" catchtap="clickItem">
    <view class="cover-container" data-index="{{index}}" catchtap="toggleBeat">
      <image src="{{item.cover}}" class="cover" />
      <image hidden="{{playIndex != index || !play}}" src="/assets/imgs/dash-to-play.png" class="play" />
    </view>
    <view class="info">
      <view class="title">{{item.title}}</view>
      <view class="author">{{item.author}}</view>
    </view>
    <view class="price">
      <view wx:if="{{item.price > 0}}" class="value">{{item.price}}</view>
      <view wx:else class="free">免费</view>
    </view>
    <view class="more" data-index="{{index}}" catchtap="clickMore">
      <image src="/assets/imgs/dash.png" />
    </view>
  </view>
</view>
<empty 
  loading="{{page.loading}}"
  hasData="{{!!page.list.length}}"
  hasMore="{{page.current_page < page.total_pages}}"/>
<view hidden="{{playIndex == -1}}" class="beat-modal">
  <view class="cover-container" catchtap="togglePlay">
    <image src="{{page.list[playIndex].cover}}" class="cover" />
    <image hidden="{{play}}" src="/assets/imgs/dash-to-play.png" class="play" />
    <image hidden="{{!play}}" src="/assets/imgs/dash-to-pause.png" class="play" />
  </view>
  <view class="info">
    <view class="title">{{page.list[playIndex].title}}</view>
    <view class="play-info">
      <view class="time">
        {{playTimeArr[1]}}:{{playTimeArr[2]}}/{{page.list[playIndex].timeArr[1]}}:{{page.list[playIndex].timeArr[2]}}
      </view>
      <view class="progress">
        <view class="progress-bar">
          <view class="circle-bar"></view>
        </view>
      </view>
    </view>
  </view>
  <view class="operation">
    <view class="buy">去购买</view>
  </view>
</view>
<view hidden="{{showIndex == -1}}" class="more-modal">
  <view class="mask" catchtap="hideMoreModal"></view>
  <view class="modal-inner">
    <view class="clearfix">
      <view hidden="{{page.list[showIndex].isCollection}}" class="item" catchtap="toggleCollectionItem">
        <image src="/assets/imgs/mall/collection.png"/>
        <view>喜欢</view>
      </view>
      <view hidden="{{!page.list[showIndex].isCollection}}" class="item" catchtap="toggleCollectionItem">
        <image src="/assets/imgs/mall/collection-active.png"/>
        <view>不喜欢</view>
      </view>
      <view hidden="{{!page.list[showIndex - 1]}}" class="item" catchtap="prevItem">
        <image src="/assets/imgs/mall/prev.png"/>
        <view>上一首</view>
      </view>
      <view hidden="{{!page.list[showIndex + 1]}}" class="item" catchtap="nextItem">
        <image src="/assets/imgs/mall/next.png" />
        <view>下一首</view>
      </view>
      <view class="item" catchtap="toBuy">
        <image src="/assets/imgs/mall/shopcar.png" />
        <view>去购买</view>
      </view>
      <view class="item" catchtap="share">
        <image src="/assets/imgs/mall/share.png" />
        <view>分享</view>
      </view>
    </view>
    <view class="close-more-modal" catchtap="hideMoreModal">取消</view>
  </view>
</view>