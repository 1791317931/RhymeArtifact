<scroll-view
  class="list-container"
  bindscrolltolower="onReachBottom"
  scroll-y
>
  <view class="list-container-inner">
    <view class="item" wx:for="{{page.list}}" wx:for-index="index" wx:for-item="item" wx:key="{{item.id}}"
      data-index="{{index}}" catchtap="toggleItemStatus">
      <view class="cover-container">
        <image src="{{item.musics_cover}}" class="cover" />
        <view hidden="{{!autoPlay && playIndex != index}}" class="play-container">
          <image hidden="{{playIndex != index || playing}}" src="/assets/imgs/dash-to-play.png" class="play" />
          <image hidden="{{playIndex != index || !playing}}" src="/assets/imgs/dash-to-pause.png" class="play" />
        </view>
      </view>
      <view class="info">
        <view class="title">{{item.music_title}}</view>
        <view class="author">{{item.lyricist}}</view>
      </view>
      <view class="more" data-index="{{index}}" catchtap="clickMore">
        <image src="/assets/imgs/dash.png" />
      </view>
    </view>
    <empty 
      loading="{{page.loading}}"
      hasData="{{!!page.list.length}}"
      hasMore="{{page.current_page < page.total_pages}}"/>
  </view>
</scroll-view>
<view hidden="{{showIndex == -1}}" class="more-modal">
  <view class="mask" catchtap="hideMoreModal"></view>
  <view class="modal-inner">
    <view class="clearfix">
      <view hidden="{{page.list[showIndex].collection}}" class="item" catchtap="toggleCollectionItem">
        <image src="/assets/imgs/mall/collection.png"/>
        <view>喜欢</view>
      </view>
      <view hidden="{{!page.list[showIndex].collection}}" class="item" catchtap="toggleCollectionItem">
        <image src="/assets/imgs/mall/collection-active.png"/>
        <view>不喜欢</view>
      </view>
      <view class="item" catchtap="nextItem">
        <image src="/assets/imgs/mall/next.png" />
        <view>下一首</view>
      </view>
      <view class="item" catchtap="share">
        <image src="/assets/imgs/mall/share.png" />
        <view>分享</view>
        <button open-type="share" class="open-type"></button>
      </view>
    </view>
    <view class="close-more-modal" catchtap="hideMoreModal">取消</view>
  </view>
</view>